{"ast":null,"code":"import { ActivatedRoute } from '@angular/router';\nimport { UserGender, UserRole } from '@avans-nx-workshop/shared/api';\nimport { UserService } from '../user.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../user.service\";\nimport * as i3 from \"@angular/common\";\nfunction UserDetailsComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h1\");\n    i0.ɵɵtext(2, \"User Details\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\")(4, \"strong\");\n    i0.ɵɵtext(5, \"Name:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\")(8, \"strong\");\n    i0.ɵɵtext(9, \"Email:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"p\")(12, \"strong\");\n    i0.ɵɵtext(13, \"Role:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"p\")(16, \"strong\");\n    i0.ɵɵtext(17, \"Gender:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"p\")(20, \"strong\");\n    i0.ɵɵtext(21, \"Status:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(23, \"img\", 3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.userDetails.name, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.userDetails.emailAddress, \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.getRoleName(ctx_r0.userDetails.role), \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.getGenderName(ctx_r0.userDetails.gender), \"\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.userDetails.isActive ? \"Active\" : \"Inactive\", \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"alt\", \"\", ctx_r0.userDetails.name, \"'s profile\");\n    i0.ɵɵproperty(\"src\", ctx_r0.userDetails.profileImgUrl, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction UserDetailsComponent_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1, \"Loading user details...\");\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = function (a1) {\n  return [\"/users\", a1, \"edit\"];\n};\nexport class UserDetailsComponent {\n  constructor(route, userService) {\n    this.route = route;\n    this.userService = userService;\n    this.errorMessage = null;\n  }\n  ngOnInit() {\n    // Haal de ID uit de routeparameters\n    this.route.paramMap.subscribe(params => {\n      const id = params.get('id');\n      if (id) {\n        this.userId = id;\n        this.getUserDetails(id); // Ophalen van gebruikersdetails\n      }\n    });\n  }\n  // Ophalen van gebruikersdetails via de UserService\n  getUserDetails(id) {\n    this.userService.getUsers().subscribe({\n      next: response => {\n        // Controleer of de data een array is of een object met een 'results'-eigenschap\n        const users = Array.isArray(response) ? response : response.results;\n        if (Array.isArray(users)) {\n          const user = users.find(u => u._id === id);\n          if (user) {\n            this.userDetails = user;\n            console.log('User details:', user);\n          } else {\n            this.errorMessage = `User with ID ${id} not found.`;\n            console.error(this.errorMessage);\n          }\n        } else {\n          this.errorMessage = 'Unexpected response format from API.';\n          console.error(this.errorMessage, response);\n        }\n      },\n      error: err => {\n        this.errorMessage = 'Error fetching users from the API.';\n        console.error(this.errorMessage, err);\n      }\n    });\n  }\n  isAdmin() {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      return false;\n    }\n    try {\n      const payload = JSON.parse(atob(token.split('.')[1]));\n      return payload.role === 'Admin';\n    } catch (e) {\n      console.error('Failed to parse token:', e);\n      return false;\n    }\n  }\n  getRoleName(role) {\n    const roleMapping = {\n      [UserRole.Admin]: 'Admin',\n      [UserRole.Guest]: 'Guest',\n      [UserRole.Unknown]: 'Unknown'\n    };\n    return roleMapping[role] || 'Unknown';\n  }\n  getGenderName(gender) {\n    const genderMapping = {\n      [UserGender.Male]: 'Male',\n      [UserGender.Female]: 'Female',\n      [UserGender.None]: 'None',\n      [UserGender.Unknown]: 'Unknown'\n    };\n    return genderMapping[gender] || 'Unknown';\n  }\n  static {\n    this.ɵfac = function UserDetailsComponent_Factory(t) {\n      return new (t || UserDetailsComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.UserService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: UserDetailsComponent,\n      selectors: [[\"avans-nx-workshop-user-details\"]],\n      decls: 6,\n      vars: 5,\n      consts: [[4, \"ngIf\", \"ngIfElse\"], [1, \"btn\", \"btn-primary\", 3, \"routerLink\"], [\"loading\", \"\"], [\"width\", \"100\", 3, \"src\", \"alt\"]],\n      template: function UserDetailsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵtemplate(0, UserDetailsComponent_div_0_Template, 24, 7, \"div\", 0);\n          i0.ɵɵelement(1, \"br\");\n          i0.ɵɵelementStart(2, \"button\", 1);\n          i0.ɵɵtext(3, \"Edit\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵtemplate(4, UserDetailsComponent_ng_template_4_Template, 2, 0, \"ng-template\", null, 2, i0.ɵɵtemplateRefExtractor);\n        }\n        if (rf & 2) {\n          const _r1 = i0.ɵɵreference(5);\n          i0.ɵɵproperty(\"ngIf\", ctx.userDetails)(\"ngIfElse\", _r1);\n          i0.ɵɵadvance(2);\n          i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(3, _c0, ctx.userId));\n        }\n      },\n      dependencies: [i3.NgIf, i1.RouterLink],\n      encapsulation: 2\n    });\n  }\n}","map":{"version":3,"names":["ActivatedRoute","UserGender","UserRole","UserService","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵadvance","ɵɵtextInterpolate1","ctx_r0","userDetails","name","emailAddress","getRoleName","role","getGenderName","gender","isActive","ɵɵpropertyInterpolate1","ɵɵproperty","profileImgUrl","ɵɵsanitizeUrl","UserDetailsComponent","constructor","route","userService","errorMessage","ngOnInit","paramMap","subscribe","params","id","get","userId","getUserDetails","getUsers","next","response","users","Array","isArray","results","user","find","u","_id","console","log","error","err","isAdmin","token","localStorage","getItem","payload","JSON","parse","atob","split","e","roleMapping","Admin","Guest","Unknown","genderMapping","Male","Female","None","ɵɵdirectiveInject","i1","i2","selectors","decls","vars","consts","template","UserDetailsComponent_Template","rf","ctx","ɵɵtemplate","UserDetailsComponent_div_0_Template","UserDetailsComponent_ng_template_4_Template","ɵɵtemplateRefExtractor","_r1","ɵɵpureFunction1","_c0"],"sources":["C:\\Users\\salim\\Dev\\avans-nx-workshop-2024\\avans-nx-workshop\\libs\\frontend\\features\\src\\lib\\users\\user-details\\user-details.component.ts","C:\\Users\\salim\\Dev\\avans-nx-workshop-2024\\avans-nx-workshop\\libs\\frontend\\features\\src\\lib\\users\\user-details\\user-details.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { IUserInfo, UserGender, UserRole } from '@avans-nx-workshop/shared/api';\nimport { UserService } from '../user.service';\n\n@Component({\n  selector: 'avans-nx-workshop-user-details',\n  templateUrl: './user-details.component.html',\n  styles: []\n})\nexport class UserDetailsComponent implements OnInit {\n  userId!: string; // Variabele om de gebruikers-ID op te slaan\n  userDetails!: IUserInfo; // Variabele om de details van de gebruiker op te slaan\n\n  constructor(private route: ActivatedRoute, private userService: UserService) {}\n\n  ngOnInit(): void {\n    // Haal de ID uit de routeparameters\n    this.route.paramMap.subscribe(params => {\n      const id = params.get('id');\n      if (id) {\n        this.userId = id;\n        this.getUserDetails(id); // Ophalen van gebruikersdetails\n      }\n    });\n  }\n  errorMessage: string | null = null;\n  // Ophalen van gebruikersdetails via de UserService\n  getUserDetails(id: string): void {\n    this.userService.getUsers().subscribe({\n      next: (response: any) => {\n        // Controleer of de data een array is of een object met een 'results'-eigenschap\n        const users = Array.isArray(response) ? response : response.results;\n  \n        if (Array.isArray(users)) {\n          const user = users.find(u => u._id === id);\n          if (user) {\n            this.userDetails = user;\n            console.log('User details:', user);\n          } else {\n            this.errorMessage = `User with ID ${id} not found.`;\n            console.error(this.errorMessage);\n          }\n        } else {\n          this.errorMessage = 'Unexpected response format from API.';\n          console.error(this.errorMessage, response);\n        }\n      },\n      error: (err) => {\n        this.errorMessage = 'Error fetching users from the API.';\n        console.error(this.errorMessage, err);\n      }\n    });\n  }\n  isAdmin(): boolean {\n    const token = localStorage.getItem('token');\n    if (!token) {\n      return false;\n    }\n  \n    try {\n      const payload = JSON.parse(atob(token.split('.')[1]));\n      return payload.role === 'Admin';\n    } catch (e) {\n      console.error('Failed to parse token:', e);\n      return false;\n    }\n  }\n  getRoleName(role: UserRole): string {\n    const roleMapping = {\n      [UserRole.Admin]: 'Admin',\n      [UserRole.Guest]: 'Guest',\n      [UserRole.Unknown]: 'Unknown',\n    };\n    return roleMapping[role] || 'Unknown';\n  }\n\n  getGenderName(gender: UserGender): string {\n    const genderMapping = {\n      [UserGender.Male]: 'Male',\n      [UserGender.Female]: 'Female',\n      [UserGender.None]: 'None',\n      [UserGender.Unknown]: 'Unknown',\n    };\n    return genderMapping[gender] || 'Unknown';\n  }\n  \n\n}\n"," \n\n<div *ngIf=\"userDetails; else loading\">\n  <h1>User Details</h1>\n  <p><strong>Name:</strong> {{ userDetails.name }}</p>\n  <p><strong>Email:</strong> {{ userDetails.emailAddress }}</p>\n  <p><strong>Role:</strong> {{ getRoleName(userDetails.role) }}</p>\n  <p><strong>Gender:</strong> {{ getGenderName(userDetails.gender) }}</p>\n  <p><strong>Status:</strong> {{ userDetails.isActive ? 'Active' : 'Inactive' }}</p>\n  <img [src]=\"userDetails.profileImgUrl\" alt=\"{{ userDetails.name }}'s profile\" width=\"100\">\n</div>\n   <br>\n  <button class=\"btn btn-primary\" [routerLink]=\"['/users', userId, 'edit']\">Edit</button>\n  <ng-template #loading>\n    <p>Loading user details...</p>\n  </ng-template>\n  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}