{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/salim/Dev/avans-nx-workshop-2024/avans-nx-workshop/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar AuthController_1;\nimport { __decorate, __metadata, __param } from \"tslib\";\nimport { Controller, Post, UseGuards, Logger, Body } from '@nestjs/common';\nimport { AuthService } from './auth.service';\nimport { Public } from '../decorators/decorators';\nimport { CreateUserDto } from '@avans-nx-workshop/backend/dto';\nimport { UserExistGuard } from '@avans-nx-workshop/backend/user';\nexport let AuthController = AuthController_1 = class AuthController {\n  constructor(authService) {\n    this.authService = authService;\n    this.logger = new Logger(AuthController_1.name);\n  }\n  login(credentials) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      _this.logger.log('Login');\n      return yield _this.authService.login(credentials);\n    })();\n  }\n  register(user) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      _this2.logger.log('Register');\n      return yield _this2.authService.register(user);\n    })();\n  }\n};\n__decorate([Public(), Post('login'), __param(0, Body()), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [Object]), __metadata(\"design:returntype\", Promise)], AuthController.prototype, \"login\", null);\n__decorate([Public(), UseGuards(UserExistGuard), Post('register'), __param(0, Body()), __metadata(\"design:type\", Function), __metadata(\"design:paramtypes\", [CreateUserDto]), __metadata(\"design:returntype\", Promise)], AuthController.prototype, \"register\", null);\nAuthController = AuthController_1 = __decorate([Controller('auth'), __metadata(\"design:paramtypes\", [AuthService])], AuthController);","map":{"version":3,"names":["Controller","Post","UseGuards","Logger","Body","AuthService","Public","CreateUserDto","UserExistGuard","AuthController","AuthController_1","constructor","authService","logger","name","login","credentials","_this","_asyncToGenerator","log","register","user","_this2","__decorate","__param"],"sources":["C:\\Users\\salim\\Dev\\avans-nx-workshop-2024\\avans-nx-workshop\\libs\\backend\\auth\\src\\lib\\auth\\auth.controller.ts"],"sourcesContent":["import {\r\n    Controller,\r\n    Request,\r\n    Post,\r\n    UseGuards,\r\n    Logger,\r\n    Body\r\n} from '@nestjs/common';\r\nimport { AuthService } from './auth.service';\r\nimport { Public } from '../decorators/decorators';\r\nimport {\r\n    IUserCredentials,\r\n    IUserIdentity,\r\n    IUserRegistration\r\n} from '@avans-nx-workshop/shared/api';\r\nimport { CreateUserDto } from '@avans-nx-workshop/backend/dto';\r\nimport { UserExistGuard } from '@avans-nx-workshop/backend/user';\r\n\r\n@Controller('auth')\r\nexport class AuthController {\r\n    private readonly logger = new Logger(AuthController.name);\r\n\r\n    constructor(private authService: AuthService) {}\r\n\r\n    @Public()\r\n    @Post('login')\r\n    async login(@Body() credentials: IUserCredentials): Promise<IUserIdentity> {\r\n        this.logger.log('Login');\r\n        return await this.authService.login(credentials);\r\n    }\r\n\r\n    @Public()\r\n    @UseGuards(UserExistGuard)\r\n    @Post('register')\r\n    async register(@Body() user: CreateUserDto): Promise<IUserIdentity> {\r\n        this.logger.log('Register');\r\n        return await this.authService.register(user);\r\n    }\r\n}\r\n"],"mappings":";;;AAAA,SACIA,UAAU,EAEVC,IAAI,EACJC,SAAS,EACTC,MAAM,EACNC,IAAI,QACD,gBAAgB;AACvB,SAASC,WAAW,QAAQ,gBAAgB;AAC5C,SAASC,MAAM,QAAQ,0BAA0B;AAMjD,SAASC,aAAa,QAAQ,gCAAgC;AAC9D,SAASC,cAAc,QAAQ,iCAAiC;AAGzD,WAAMC,cAAc,GAAAC,gBAAA,GAApB,MAAMD,cAAc;EAGvBE,YAAoBC,WAAwB;IAAxB,KAAAA,WAAW,GAAXA,WAAW;IAFd,KAAAC,MAAM,GAAG,IAAIV,MAAM,CAACO,gBAAc,CAACI,IAAI,CAAC;EAEV;EAIzCC,KAAKA,CAASC,WAA6B;IAAA,IAAAC,KAAA;IAAA,OAAAC,iBAAA;MAC7CD,KAAI,CAACJ,MAAM,CAACM,GAAG,CAAC,OAAO,CAAC;MACxB,aAAaF,KAAI,CAACL,WAAW,CAACG,KAAK,CAACC,WAAW,CAAC;IAAC;EACrD;EAKMI,QAAQA,CAASC,IAAmB;IAAA,IAAAC,MAAA;IAAA,OAAAJ,iBAAA;MACtCI,MAAI,CAACT,MAAM,CAACM,GAAG,CAAC,UAAU,CAAC;MAC3B,aAAaG,MAAI,CAACV,WAAW,CAACQ,QAAQ,CAACC,IAAI,CAAC;IAAC;EACjD;CACH;AAZSE,UAAA,EAFLjB,MAAM,EAAE,EACRL,IAAI,CAAC,OAAO,CAAC,EACDuB,OAAA,IAAApB,IAAI,EAAE,G,mKAGlB;AAKKmB,UAAA,EAHLjB,MAAM,EAAE,EACRJ,SAAS,CAACM,cAAc,CAAC,EACzBP,IAAI,CAAC,UAAU,CAAC,EACDuB,OAAA,IAAApB,IAAI,EAAE,G,sEAAOG,aAAa,I,sFAGzC;AAlBQE,cAAc,GAAAC,gBAAA,GAAAa,UAAA,EAD1BvB,UAAU,CAAC,MAAM,CAAC,E,iCAIkBK,WAAW,G,EAHnCI,cAAc,CAmB1B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}