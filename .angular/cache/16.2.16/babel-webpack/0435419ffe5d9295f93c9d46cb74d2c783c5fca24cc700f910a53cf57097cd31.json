{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Injectable } from '@nestjs/common';\nimport { map } from 'rxjs/operators';\nexport let ApiResponseInterceptor = class ApiResponseInterceptor {\n  intercept(context, next) {\n    return next.handle().pipe(map(results => {\n      if (results) {\n        return {\n          results: results,\n          info: {\n            version: '1.0',\n            type: results instanceof Array ? 'list' : 'object',\n            count: results instanceof Array ? results.length : 1\n          }\n        };\n      } else {\n        return {\n          results: undefined,\n          info: {\n            version: '1.0',\n            type: 'none',\n            count: 0\n          }\n        };\n      }\n    }));\n  }\n};\nApiResponseInterceptor = __decorate([Injectable()], ApiResponseInterceptor);","map":{"version":3,"names":["Injectable","map","ApiResponseInterceptor","intercept","context","next","handle","pipe","results","info","version","type","Array","count","length","undefined","__decorate"],"sources":["C:\\Users\\salim\\Dev\\avans-nx-workshop-2024\\avans-nx-workshop\\libs\\backend\\dto\\src\\lib\\api-response.interceptor.ts"],"sourcesContent":["import { ApiResponse } from '@avans-nx-workshop/shared/api';\r\nimport {\r\n    Injectable,\r\n    NestInterceptor,\r\n    ExecutionContext,\r\n    CallHandler\r\n} from '@nestjs/common';\r\nimport { Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\n\r\n@Injectable()\r\nexport class ApiResponseInterceptor implements NestInterceptor {\r\n    intercept(\r\n        context: ExecutionContext,\r\n        next: CallHandler\r\n    ): Observable<ApiResponse<unknown>> {\r\n        return next.handle().pipe(\r\n            map((results) => {\r\n                if (results) {\r\n                    return {\r\n                        results: results,\r\n                        info: {\r\n                            version: '1.0',\r\n                            type: results instanceof Array ? 'list' : 'object',\r\n                            count: results instanceof Array ? results.length : 1\r\n                        }\r\n                    };\r\n                } else {\r\n                    return {\r\n                        results: undefined,\r\n                        info: {\r\n                            version: '1.0',\r\n                            type: 'none',\r\n                            count: 0\r\n                        }\r\n                    };\r\n                }\r\n            })\r\n        );\r\n    }\r\n}\r\n"],"mappings":";AACA,SACIA,UAAU,QAIP,gBAAgB;AAEvB,SAASC,GAAG,QAAQ,gBAAgB;AAG7B,WAAMC,sBAAsB,GAA5B,MAAMA,sBAAsB;EAC/BC,SAASA,CACLC,OAAyB,EACzBC,IAAiB;IAEjB,OAAOA,IAAI,CAACC,MAAM,EAAE,CAACC,IAAI,CACrBN,GAAG,CAAEO,OAAO,IAAI;MACZ,IAAIA,OAAO,EAAE;QACT,OAAO;UACHA,OAAO,EAAEA,OAAO;UAChBC,IAAI,EAAE;YACFC,OAAO,EAAE,KAAK;YACdC,IAAI,EAAEH,OAAO,YAAYI,KAAK,GAAG,MAAM,GAAG,QAAQ;YAClDC,KAAK,EAAEL,OAAO,YAAYI,KAAK,GAAGJ,OAAO,CAACM,MAAM,GAAG;;SAE1D;OACJ,MAAM;QACH,OAAO;UACHN,OAAO,EAAEO,SAAS;UAClBN,IAAI,EAAE;YACFC,OAAO,EAAE,KAAK;YACdC,IAAI,EAAE,MAAM;YACZE,KAAK,EAAE;;SAEd;;IAET,CAAC,CAAC,CACL;EACL;CACH;AA7BYX,sBAAsB,GAAAc,UAAA,EADlChB,UAAU,EAAE,C,EACAE,sBAAsB,CA6BlC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}