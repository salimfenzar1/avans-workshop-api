{"ast":null,"code":"\"use strict\";\n\nvar _asyncToGenerator = require(\"C:/Users/salim/Dev/avans-nx-workshop-2024/avans-nx-workshop/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\nvar ParseUUIDPipe_1;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ParseUUIDPipe = void 0;\nconst tslib_1 = require(\"tslib\");\nconst injectable_decorator_1 = require(\"../decorators/core/injectable.decorator\");\nconst optional_decorator_1 = require(\"../decorators/core/optional.decorator\");\nconst http_status_enum_1 = require(\"../enums/http-status.enum\");\nconst http_error_by_code_util_1 = require(\"../utils/http-error-by-code.util\");\nconst shared_utils_1 = require(\"../utils/shared.utils\");\n/**\n * Defines the built-in ParseUUID Pipe\n *\n * @see [Built-in Pipes](https://docs.nestjs.com/pipes#built-in-pipes)\n *\n * @publicApi\n */\nlet ParseUUIDPipe = ParseUUIDPipe_1 = class ParseUUIDPipe {\n  constructor(options) {\n    this.options = options;\n    options = options || {};\n    const {\n      exceptionFactory,\n      errorHttpStatusCode = http_status_enum_1.HttpStatus.BAD_REQUEST,\n      version\n    } = options;\n    this.version = version;\n    this.exceptionFactory = exceptionFactory || (error => new http_error_by_code_util_1.HttpErrorByCode[errorHttpStatusCode](error));\n  }\n  transform(value, metadata) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      if ((0, shared_utils_1.isNil)(value) && _this.options?.optional) {\n        return value;\n      }\n      if (!_this.isUUID(value, _this.version)) {\n        throw _this.exceptionFactory(`Validation failed (uuid${_this.version ? ` v ${_this.version}` : ''} is expected)`);\n      }\n      return value;\n    })();\n  }\n  isUUID(str, version = 'all') {\n    if (!(0, shared_utils_1.isString)(str)) {\n      throw this.exceptionFactory('The value passed as UUID is not a string');\n    }\n    const pattern = ParseUUIDPipe_1.uuidRegExps[version];\n    return pattern?.test(str);\n  }\n};\nexports.ParseUUIDPipe = ParseUUIDPipe;\nParseUUIDPipe.uuidRegExps = {\n  3: /^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,\n  4: /^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,\n  5: /^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,\n  7: /^[0-9A-F]{8}-[0-9A-F]{4}-7[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,\n  all: /^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i\n};\nexports.ParseUUIDPipe = ParseUUIDPipe = ParseUUIDPipe_1 = tslib_1.__decorate([(0, injectable_decorator_1.Injectable)(), tslib_1.__param(0, (0, optional_decorator_1.Optional)()), tslib_1.__metadata(\"design:paramtypes\", [Object])], ParseUUIDPipe);","map":{"version":3,"names":["_asyncToGenerator","require","default","ParseUUIDPipe_1","Object","defineProperty","exports","value","ParseUUIDPipe","tslib_1","injectable_decorator_1","optional_decorator_1","http_status_enum_1","http_error_by_code_util_1","shared_utils_1","constructor","options","exceptionFactory","errorHttpStatusCode","HttpStatus","BAD_REQUEST","version","error","HttpErrorByCode","transform","metadata","_this","isNil","optional","isUUID","str","isString","pattern","uuidRegExps","test","all","__decorate","Injectable","__param","Optional","__metadata"],"sources":["C:/Users/salim/Dev/avans-nx-workshop-2024/avans-nx-workshop/node_modules/@nestjs/common/pipes/parse-uuid.pipe.js"],"sourcesContent":["\"use strict\";\nvar ParseUUIDPipe_1;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ParseUUIDPipe = void 0;\nconst tslib_1 = require(\"tslib\");\nconst injectable_decorator_1 = require(\"../decorators/core/injectable.decorator\");\nconst optional_decorator_1 = require(\"../decorators/core/optional.decorator\");\nconst http_status_enum_1 = require(\"../enums/http-status.enum\");\nconst http_error_by_code_util_1 = require(\"../utils/http-error-by-code.util\");\nconst shared_utils_1 = require(\"../utils/shared.utils\");\n/**\n * Defines the built-in ParseUUID Pipe\n *\n * @see [Built-in Pipes](https://docs.nestjs.com/pipes#built-in-pipes)\n *\n * @publicApi\n */\nlet ParseUUIDPipe = ParseUUIDPipe_1 = class ParseUUIDPipe {\n    constructor(options) {\n        this.options = options;\n        options = options || {};\n        const { exceptionFactory, errorHttpStatusCode = http_status_enum_1.HttpStatus.BAD_REQUEST, version, } = options;\n        this.version = version;\n        this.exceptionFactory =\n            exceptionFactory ||\n                (error => new http_error_by_code_util_1.HttpErrorByCode[errorHttpStatusCode](error));\n    }\n    async transform(value, metadata) {\n        if ((0, shared_utils_1.isNil)(value) && this.options?.optional) {\n            return value;\n        }\n        if (!this.isUUID(value, this.version)) {\n            throw this.exceptionFactory(`Validation failed (uuid${this.version ? ` v ${this.version}` : ''} is expected)`);\n        }\n        return value;\n    }\n    isUUID(str, version = 'all') {\n        if (!(0, shared_utils_1.isString)(str)) {\n            throw this.exceptionFactory('The value passed as UUID is not a string');\n        }\n        const pattern = ParseUUIDPipe_1.uuidRegExps[version];\n        return pattern?.test(str);\n    }\n};\nexports.ParseUUIDPipe = ParseUUIDPipe;\nParseUUIDPipe.uuidRegExps = {\n    3: /^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,\n    4: /^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,\n    5: /^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,\n    7: /^[0-9A-F]{8}-[0-9A-F]{4}-7[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,\n    all: /^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i,\n};\nexports.ParseUUIDPipe = ParseUUIDPipe = ParseUUIDPipe_1 = tslib_1.__decorate([\n    (0, injectable_decorator_1.Injectable)(),\n    tslib_1.__param(0, (0, optional_decorator_1.Optional)()),\n    tslib_1.__metadata(\"design:paramtypes\", [Object])\n], ParseUUIDPipe);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}