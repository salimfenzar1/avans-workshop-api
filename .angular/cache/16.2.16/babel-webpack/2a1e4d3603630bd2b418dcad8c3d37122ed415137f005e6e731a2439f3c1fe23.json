{"ast":null,"code":"var _a;\nimport { __decorate, __metadata } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { AuthService } from '@avans-nx-workshop/features';\nimport { Router } from '@angular/router';\nexport let LoginComponent = class LoginComponent {\n  constructor(authService, router) {\n    this.authService = authService;\n    this.router = router;\n    this.credentials = {\n      emailAddress: '',\n      password: ''\n    };\n    this.errorMessage = null;\n  }\n  login() {\n    this.authService.login(this.credentials).subscribe({\n      next: response => {\n        const user = response.results;\n        console.log('Login response:', user);\n        if (user.token) {\n          localStorage.setItem('token', user.token);\n          this.router.navigate(['/']);\n        } else {\n          console.error('No token returned from login.');\n          this.errorMessage = 'Login failed. Please try again.';\n        }\n      },\n      error: err => {\n        this.errorMessage = 'Invalid email or password';\n        console.error('Login error', err);\n      }\n    });\n  }\n};\nLoginComponent = __decorate([Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html'\n}), __metadata(\"design:paramtypes\", [typeof (_a = typeof AuthService !== \"undefined\" && AuthService) === \"function\" ? _a : Object, Router])], LoginComponent);","map":{"version":3,"names":["Component","AuthService","Router","LoginComponent","constructor","authService","router","credentials","emailAddress","password","errorMessage","login","subscribe","next","response","user","results","console","log","token","localStorage","setItem","navigate","error","err","__decorate","selector","templateUrl","_a","Object"],"sources":["C:\\Users\\salim\\Dev\\avans-nx-workshop-2024\\avans-nx-workshop\\apps\\my-app\\src\\app\\components\\login\\login.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { AuthService } from '@avans-nx-workshop/features';\r\nimport { IUserCredentials } from '@avans-nx-workshop/shared/api';\r\nimport { Router } from '@angular/router';\r\n\r\n@Component({\r\n    selector: 'app-login',\r\n    templateUrl: './login.component.html',\r\n})\r\nexport class LoginComponent {\r\n    credentials: IUserCredentials = { emailAddress: '', password: '' };\r\n    errorMessage: string | null = null;\r\n\r\n    constructor(private authService: AuthService, private router: Router) {}\r\n\r\n    login(): void {\r\n        this.authService.login(this.credentials).subscribe({\r\n            next: (response: any) => {\r\n                const user = response.results; \r\n                console.log('Login response:', user);\r\n                if (user.token) {\r\n                    localStorage.setItem('token', user.token);\r\n                    this.router.navigate(['/']);\r\n                } else {\r\n                    console.error('No token returned from login.');\r\n                    this.errorMessage = 'Login failed. Please try again.';\r\n                }\r\n            },\r\n            error: (err) => {\r\n                this.errorMessage = 'Invalid email or password';\r\n                console.error('Login error', err);\r\n            }\r\n        });\r\n    }\r\n    \r\n}\r\n"],"mappings":";;AAAA,SAASA,SAAS,QAAQ,eAAe;AACzC,SAASC,WAAW,QAAQ,6BAA6B;AAEzD,SAASC,MAAM,QAAQ,iBAAiB;AAMjC,WAAMC,cAAc,GAApB,MAAMA,cAAc;EAIvBC,YAAoBC,WAAwB,EAAUC,MAAc;IAAhD,KAAAD,WAAW,GAAXA,WAAW;IAAuB,KAAAC,MAAM,GAANA,MAAM;IAH5D,KAAAC,WAAW,GAAqB;MAAEC,YAAY,EAAE,EAAE;MAAEC,QAAQ,EAAE;IAAE,CAAE;IAClE,KAAAC,YAAY,GAAkB,IAAI;EAEqC;EAEvEC,KAAKA,CAAA;IACD,IAAI,CAACN,WAAW,CAACM,KAAK,CAAC,IAAI,CAACJ,WAAW,CAAC,CAACK,SAAS,CAAC;MAC/CC,IAAI,EAAGC,QAAa,IAAI;QACpB,MAAMC,IAAI,GAAGD,QAAQ,CAACE,OAAO;QAC7BC,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEH,IAAI,CAAC;QACpC,IAAIA,IAAI,CAACI,KAAK,EAAE;UACZC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEN,IAAI,CAACI,KAAK,CAAC;UACzC,IAAI,CAACb,MAAM,CAACgB,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;SAC9B,MAAM;UACHL,OAAO,CAACM,KAAK,CAAC,+BAA+B,CAAC;UAC9C,IAAI,CAACb,YAAY,GAAG,iCAAiC;;MAE7D,CAAC;MACDa,KAAK,EAAGC,GAAG,IAAI;QACX,IAAI,CAACd,YAAY,GAAG,2BAA2B;QAC/CO,OAAO,CAACM,KAAK,CAAC,aAAa,EAAEC,GAAG,CAAC;MACrC;KACH,CAAC;EACN;CAEH;AA1BYrB,cAAc,GAAAsB,UAAA,EAJ1BzB,SAAS,CAAC;EACP0B,QAAQ,EAAE,WAAW;EACrBC,WAAW,EAAE;CAChB,CAAC,E,qDAKmC1B,WAAW,oBAAXA,WAAW,mBAAA2B,EAAA,GAAAC,MAAA,EAAkB3B,MAAM,G,EAJ3DC,cAAc,CA0B1B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}