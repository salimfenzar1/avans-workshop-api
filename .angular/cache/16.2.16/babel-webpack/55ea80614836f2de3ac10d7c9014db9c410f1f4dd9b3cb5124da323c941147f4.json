{"ast":null,"code":"import { __decorate, __metadata, __param } from \"tslib\";\nimport { Injectable } from '@nestjs/common';\nimport { InjectModel } from '@nestjs/mongoose';\nimport { Model } from 'mongoose';\nexport let UserExistGuard = class UserExistGuard {\n  constructor(userModel) {\n    this.userModel = userModel;\n  }\n  canActivate(context) {\n    const user = context.switchToHttp().getRequest().body;\n    return !!this.userModel.findOne({\n      username: user.username\n    });\n  }\n};\nUserExistGuard = __decorate([Injectable(), __param(0, InjectModel('User')), __metadata(\"design:paramtypes\", [Model])], UserExistGuard);","map":{"version":3,"names":["Injectable","InjectModel","Model","UserExistGuard","constructor","userModel","canActivate","context","user","switchToHttp","getRequest","body","findOne","username","__decorate","__param"],"sources":["C:\\Users\\salim\\Dev\\avans-nx-workshop-2024\\avans-nx-workshop\\libs\\backend\\user\\src\\lib\\user\\user-exists.guard.ts"],"sourcesContent":["import { CanActivate, ExecutionContext, Injectable } from '@nestjs/common';\r\nimport { InjectModel } from '@nestjs/mongoose';\r\nimport { Model } from 'mongoose';\r\nimport { User } from './user.schema';\r\nimport { Observable } from 'rxjs';\r\n\r\n@Injectable()\r\nexport class UserExistGuard implements CanActivate {\r\n    constructor(@InjectModel('User') private readonly userModel: Model<User>) {}\r\n\r\n    canActivate(\r\n        context: ExecutionContext\r\n    ): boolean | Promise<boolean> | Observable<boolean> {\r\n        const user = context.switchToHttp().getRequest().body;\r\n        return !!this.userModel.findOne({ username: user.username });\r\n    }\r\n}\r\n"],"mappings":";AAAA,SAAwCA,UAAU,QAAQ,gBAAgB;AAC1E,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,KAAK,QAAQ,UAAU;AAKzB,WAAMC,cAAc,GAApB,MAAMA,cAAc;EACvBC,YAAkDC,SAAsB;IAAtB,KAAAA,SAAS,GAATA,SAAS;EAAgB;EAE3EC,WAAWA,CACPC,OAAyB;IAEzB,MAAMC,IAAI,GAAGD,OAAO,CAACE,YAAY,EAAE,CAACC,UAAU,EAAE,CAACC,IAAI;IACrD,OAAO,CAAC,CAAC,IAAI,CAACN,SAAS,CAACO,OAAO,CAAC;MAAEC,QAAQ,EAAEL,IAAI,CAACK;IAAQ,CAAE,CAAC;EAChE;CACH;AATYV,cAAc,GAAAW,UAAA,EAD1Bd,UAAU,EAAE,EAEIe,OAAA,IAAAd,WAAW,CAAC,MAAM,CAAC,G,iCAA6BC,KAAK,G,EADzDC,cAAc,CAS1B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}