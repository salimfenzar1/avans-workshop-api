{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.InternalCoreModuleFactory = void 0;\nconst common_1 = require(\"@nestjs/common\");\nconst external_context_creator_1 = require(\"../../helpers/external-context-creator\");\nconst http_adapter_host_1 = require(\"../../helpers/http-adapter-host\");\nconst initialize_on_preview_allowlist_1 = require(\"../../inspector/initialize-on-preview.allowlist\");\nconst serialized_graph_1 = require(\"../../inspector/serialized-graph\");\nconst injector_1 = require(\"../injector\");\nconst instance_loader_1 = require(\"../instance-loader\");\nconst lazy_module_loader_1 = require(\"../lazy-module-loader/lazy-module-loader\");\nconst modules_container_1 = require(\"../modules-container\");\nconst internal_core_module_1 = require(\"./internal-core-module\");\nclass InternalCoreModuleFactory {\n  static create(container, scanner, moduleCompiler, httpAdapterHost, graphInspector, moduleOverrides) {\n    const lazyModuleLoaderFactory = () => {\n      const logger = new common_1.Logger(lazy_module_loader_1.LazyModuleLoader.name, {\n        timestamp: false\n      });\n      const injector = new injector_1.Injector();\n      const instanceLoader = new instance_loader_1.InstanceLoader(container, injector, graphInspector, logger);\n      return new lazy_module_loader_1.LazyModuleLoader(scanner, instanceLoader, moduleCompiler, container.getModules(), moduleOverrides);\n    };\n    initialize_on_preview_allowlist_1.InitializeOnPreviewAllowlist.add(internal_core_module_1.InternalCoreModule);\n    return internal_core_module_1.InternalCoreModule.register([{\n      provide: external_context_creator_1.ExternalContextCreator,\n      useFactory: () => external_context_creator_1.ExternalContextCreator.fromContainer(container)\n    }, {\n      provide: modules_container_1.ModulesContainer,\n      useFactory: () => container.getModules()\n    }, {\n      provide: http_adapter_host_1.HttpAdapterHost,\n      useFactory: () => httpAdapterHost\n    }, {\n      provide: lazy_module_loader_1.LazyModuleLoader,\n      useFactory: lazyModuleLoaderFactory\n    }, {\n      provide: serialized_graph_1.SerializedGraph,\n      useFactory: () => container.serializedGraph\n    }]);\n  }\n}\nexports.InternalCoreModuleFactory = InternalCoreModuleFactory;","map":{"version":3,"names":["Object","defineProperty","exports","value","InternalCoreModuleFactory","common_1","require","external_context_creator_1","http_adapter_host_1","initialize_on_preview_allowlist_1","serialized_graph_1","injector_1","instance_loader_1","lazy_module_loader_1","modules_container_1","internal_core_module_1","create","container","scanner","moduleCompiler","httpAdapterHost","graphInspector","moduleOverrides","lazyModuleLoaderFactory","logger","Logger","LazyModuleLoader","name","timestamp","injector","Injector","instanceLoader","InstanceLoader","getModules","InitializeOnPreviewAllowlist","add","InternalCoreModule","register","provide","ExternalContextCreator","useFactory","fromContainer","ModulesContainer","HttpAdapterHost","SerializedGraph","serializedGraph"],"sources":["C:/Users/salim/Dev/avans-nx-workshop-2024/avans-nx-workshop/node_modules/@nestjs/core/injector/internal-core-module/internal-core-module-factory.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.InternalCoreModuleFactory = void 0;\nconst common_1 = require(\"@nestjs/common\");\nconst external_context_creator_1 = require(\"../../helpers/external-context-creator\");\nconst http_adapter_host_1 = require(\"../../helpers/http-adapter-host\");\nconst initialize_on_preview_allowlist_1 = require(\"../../inspector/initialize-on-preview.allowlist\");\nconst serialized_graph_1 = require(\"../../inspector/serialized-graph\");\nconst injector_1 = require(\"../injector\");\nconst instance_loader_1 = require(\"../instance-loader\");\nconst lazy_module_loader_1 = require(\"../lazy-module-loader/lazy-module-loader\");\nconst modules_container_1 = require(\"../modules-container\");\nconst internal_core_module_1 = require(\"./internal-core-module\");\nclass InternalCoreModuleFactory {\n    static create(container, scanner, moduleCompiler, httpAdapterHost, graphInspector, moduleOverrides) {\n        const lazyModuleLoaderFactory = () => {\n            const logger = new common_1.Logger(lazy_module_loader_1.LazyModuleLoader.name, {\n                timestamp: false,\n            });\n            const injector = new injector_1.Injector();\n            const instanceLoader = new instance_loader_1.InstanceLoader(container, injector, graphInspector, logger);\n            return new lazy_module_loader_1.LazyModuleLoader(scanner, instanceLoader, moduleCompiler, container.getModules(), moduleOverrides);\n        };\n        initialize_on_preview_allowlist_1.InitializeOnPreviewAllowlist.add(internal_core_module_1.InternalCoreModule);\n        return internal_core_module_1.InternalCoreModule.register([\n            {\n                provide: external_context_creator_1.ExternalContextCreator,\n                useFactory: () => external_context_creator_1.ExternalContextCreator.fromContainer(container),\n            },\n            {\n                provide: modules_container_1.ModulesContainer,\n                useFactory: () => container.getModules(),\n            },\n            {\n                provide: http_adapter_host_1.HttpAdapterHost,\n                useFactory: () => httpAdapterHost,\n            },\n            {\n                provide: lazy_module_loader_1.LazyModuleLoader,\n                useFactory: lazyModuleLoaderFactory,\n            },\n            {\n                provide: serialized_graph_1.SerializedGraph,\n                useFactory: () => container.serializedGraph,\n            },\n        ]);\n    }\n}\nexports.InternalCoreModuleFactory = InternalCoreModuleFactory;\n"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,yBAAyB,GAAG,KAAK,CAAC;AAC1C,MAAMC,QAAQ,GAAGC,OAAO,CAAC,gBAAgB,CAAC;AAC1C,MAAMC,0BAA0B,GAAGD,OAAO,CAAC,wCAAwC,CAAC;AACpF,MAAME,mBAAmB,GAAGF,OAAO,CAAC,iCAAiC,CAAC;AACtE,MAAMG,iCAAiC,GAAGH,OAAO,CAAC,iDAAiD,CAAC;AACpG,MAAMI,kBAAkB,GAAGJ,OAAO,CAAC,kCAAkC,CAAC;AACtE,MAAMK,UAAU,GAAGL,OAAO,CAAC,aAAa,CAAC;AACzC,MAAMM,iBAAiB,GAAGN,OAAO,CAAC,oBAAoB,CAAC;AACvD,MAAMO,oBAAoB,GAAGP,OAAO,CAAC,0CAA0C,CAAC;AAChF,MAAMQ,mBAAmB,GAAGR,OAAO,CAAC,sBAAsB,CAAC;AAC3D,MAAMS,sBAAsB,GAAGT,OAAO,CAAC,wBAAwB,CAAC;AAChE,MAAMF,yBAAyB,CAAC;EAC5B,OAAOY,MAAMA,CAACC,SAAS,EAAEC,OAAO,EAAEC,cAAc,EAAEC,eAAe,EAAEC,cAAc,EAAEC,eAAe,EAAE;IAChG,MAAMC,uBAAuB,GAAGA,CAAA,KAAM;MAClC,MAAMC,MAAM,GAAG,IAAInB,QAAQ,CAACoB,MAAM,CAACZ,oBAAoB,CAACa,gBAAgB,CAACC,IAAI,EAAE;QAC3EC,SAAS,EAAE;MACf,CAAC,CAAC;MACF,MAAMC,QAAQ,GAAG,IAAIlB,UAAU,CAACmB,QAAQ,CAAC,CAAC;MAC1C,MAAMC,cAAc,GAAG,IAAInB,iBAAiB,CAACoB,cAAc,CAACf,SAAS,EAAEY,QAAQ,EAAER,cAAc,EAAEG,MAAM,CAAC;MACxG,OAAO,IAAIX,oBAAoB,CAACa,gBAAgB,CAACR,OAAO,EAAEa,cAAc,EAAEZ,cAAc,EAAEF,SAAS,CAACgB,UAAU,CAAC,CAAC,EAAEX,eAAe,CAAC;IACtI,CAAC;IACDb,iCAAiC,CAACyB,4BAA4B,CAACC,GAAG,CAACpB,sBAAsB,CAACqB,kBAAkB,CAAC;IAC7G,OAAOrB,sBAAsB,CAACqB,kBAAkB,CAACC,QAAQ,CAAC,CACtD;MACIC,OAAO,EAAE/B,0BAA0B,CAACgC,sBAAsB;MAC1DC,UAAU,EAAEA,CAAA,KAAMjC,0BAA0B,CAACgC,sBAAsB,CAACE,aAAa,CAACxB,SAAS;IAC/F,CAAC,EACD;MACIqB,OAAO,EAAExB,mBAAmB,CAAC4B,gBAAgB;MAC7CF,UAAU,EAAEA,CAAA,KAAMvB,SAAS,CAACgB,UAAU,CAAC;IAC3C,CAAC,EACD;MACIK,OAAO,EAAE9B,mBAAmB,CAACmC,eAAe;MAC5CH,UAAU,EAAEA,CAAA,KAAMpB;IACtB,CAAC,EACD;MACIkB,OAAO,EAAEzB,oBAAoB,CAACa,gBAAgB;MAC9Cc,UAAU,EAAEjB;IAChB,CAAC,EACD;MACIe,OAAO,EAAE5B,kBAAkB,CAACkC,eAAe;MAC3CJ,UAAU,EAAEA,CAAA,KAAMvB,SAAS,CAAC4B;IAChC,CAAC,CACJ,CAAC;EACN;AACJ;AACA3C,OAAO,CAACE,yBAAyB,GAAGA,yBAAyB","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}