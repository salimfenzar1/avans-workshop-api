{"ast":null,"code":"\"use strict\";\n\nvar _asyncToGenerator = require(\"C:/Users/salim/Dev/avans-nx-workshop-2024/avans-nx-workshop/node_modules/@babel/runtime/helpers/asyncToGenerator.js\").default;\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.GuardsConsumer = void 0;\nconst shared_utils_1 = require(\"@nestjs/common/utils/shared.utils\");\nconst rxjs_1 = require(\"rxjs\");\nconst execution_context_host_1 = require(\"../helpers/execution-context-host\");\nclass GuardsConsumer {\n  tryActivate(guards, args, instance, callback, type) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      if (!guards || (0, shared_utils_1.isEmpty)(guards)) {\n        return true;\n      }\n      const context = _this.createContext(args, instance, callback);\n      context.setType(type);\n      for (const guard of guards) {\n        const result = guard.canActivate(context);\n        if (yield _this.pickResult(result)) {\n          continue;\n        }\n        return false;\n      }\n      return true;\n    })();\n  }\n  createContext(args, instance, callback) {\n    return new execution_context_host_1.ExecutionContextHost(args, instance.constructor, callback);\n  }\n  pickResult(result) {\n    return _asyncToGenerator(function* () {\n      if (result instanceof rxjs_1.Observable) {\n        return (0, rxjs_1.lastValueFrom)(result);\n      }\n      return result;\n    })();\n  }\n}\nexports.GuardsConsumer = GuardsConsumer;","map":{"version":3,"names":["_asyncToGenerator","require","default","Object","defineProperty","exports","value","GuardsConsumer","shared_utils_1","rxjs_1","execution_context_host_1","tryActivate","guards","args","instance","callback","type","_this","isEmpty","context","createContext","setType","guard","result","canActivate","pickResult","ExecutionContextHost","constructor","Observable","lastValueFrom"],"sources":["C:/Users/salim/Dev/avans-nx-workshop-2024/avans-nx-workshop/node_modules/@nestjs/core/guards/guards-consumer.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.GuardsConsumer = void 0;\nconst shared_utils_1 = require(\"@nestjs/common/utils/shared.utils\");\nconst rxjs_1 = require(\"rxjs\");\nconst execution_context_host_1 = require(\"../helpers/execution-context-host\");\nclass GuardsConsumer {\n    async tryActivate(guards, args, instance, callback, type) {\n        if (!guards || (0, shared_utils_1.isEmpty)(guards)) {\n            return true;\n        }\n        const context = this.createContext(args, instance, callback);\n        context.setType(type);\n        for (const guard of guards) {\n            const result = guard.canActivate(context);\n            if (await this.pickResult(result)) {\n                continue;\n            }\n            return false;\n        }\n        return true;\n    }\n    createContext(args, instance, callback) {\n        return new execution_context_host_1.ExecutionContextHost(args, instance.constructor, callback);\n    }\n    async pickResult(result) {\n        if (result instanceof rxjs_1.Observable) {\n            return (0, rxjs_1.lastValueFrom)(result);\n        }\n        return result;\n    }\n}\nexports.GuardsConsumer = GuardsConsumer;\n"],"mappings":"AAAA,YAAY;;AAAC,IAAAA,iBAAA,GAAAC,OAAA,wHAAAC,OAAA;AACbC,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,cAAc,GAAG,KAAK,CAAC;AAC/B,MAAMC,cAAc,GAAGP,OAAO,CAAC,mCAAmC,CAAC;AACnE,MAAMQ,MAAM,GAAGR,OAAO,CAAC,MAAM,CAAC;AAC9B,MAAMS,wBAAwB,GAAGT,OAAO,CAAC,mCAAmC,CAAC;AAC7E,MAAMM,cAAc,CAAC;EACXI,WAAWA,CAACC,MAAM,EAAEC,IAAI,EAAEC,QAAQ,EAAEC,QAAQ,EAAEC,IAAI,EAAE;IAAA,IAAAC,KAAA;IAAA,OAAAjB,iBAAA;MACtD,IAAI,CAACY,MAAM,IAAI,CAAC,CAAC,EAAEJ,cAAc,CAACU,OAAO,EAAEN,MAAM,CAAC,EAAE;QAChD,OAAO,IAAI;MACf;MACA,MAAMO,OAAO,GAAGF,KAAI,CAACG,aAAa,CAACP,IAAI,EAAEC,QAAQ,EAAEC,QAAQ,CAAC;MAC5DI,OAAO,CAACE,OAAO,CAACL,IAAI,CAAC;MACrB,KAAK,MAAMM,KAAK,IAAIV,MAAM,EAAE;QACxB,MAAMW,MAAM,GAAGD,KAAK,CAACE,WAAW,CAACL,OAAO,CAAC;QACzC,UAAUF,KAAI,CAACQ,UAAU,CAACF,MAAM,CAAC,EAAE;UAC/B;QACJ;QACA,OAAO,KAAK;MAChB;MACA,OAAO,IAAI;IAAC;EAChB;EACAH,aAAaA,CAACP,IAAI,EAAEC,QAAQ,EAAEC,QAAQ,EAAE;IACpC,OAAO,IAAIL,wBAAwB,CAACgB,oBAAoB,CAACb,IAAI,EAAEC,QAAQ,CAACa,WAAW,EAAEZ,QAAQ,CAAC;EAClG;EACMU,UAAUA,CAACF,MAAM,EAAE;IAAA,OAAAvB,iBAAA;MACrB,IAAIuB,MAAM,YAAYd,MAAM,CAACmB,UAAU,EAAE;QACrC,OAAO,CAAC,CAAC,EAAEnB,MAAM,CAACoB,aAAa,EAAEN,MAAM,CAAC;MAC5C;MACA,OAAOA,MAAM;IAAC;EAClB;AACJ;AACAlB,OAAO,CAACE,cAAc,GAAGA,cAAc","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}