{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.RouterExceptionFilters = void 0;\nconst constants_1 = require(\"@nestjs/common/constants\");\nconst shared_utils_1 = require(\"@nestjs/common/utils/shared.utils\");\nconst base_exception_filter_context_1 = require(\"../exceptions/base-exception-filter-context\");\nconst exceptions_handler_1 = require(\"../exceptions/exceptions-handler\");\nconst constants_2 = require(\"../injector/constants\");\nconst iterare_1 = require(\"iterare\");\nclass RouterExceptionFilters extends base_exception_filter_context_1.BaseExceptionFilterContext {\n  constructor(container, config, applicationRef) {\n    super(container);\n    this.config = config;\n    this.applicationRef = applicationRef;\n  }\n  create(instance, callback, moduleKey, contextId = constants_2.STATIC_CONTEXT, inquirerId) {\n    this.moduleContext = moduleKey;\n    const exceptionHandler = new exceptions_handler_1.ExceptionsHandler(this.applicationRef);\n    const filters = this.createContext(instance, callback, constants_1.EXCEPTION_FILTERS_METADATA, contextId, inquirerId);\n    if ((0, shared_utils_1.isEmpty)(filters)) {\n      return exceptionHandler;\n    }\n    exceptionHandler.setCustomFilters(filters.reverse());\n    return exceptionHandler;\n  }\n  getGlobalMetadata(contextId = constants_2.STATIC_CONTEXT, inquirerId) {\n    const globalFilters = this.config.getGlobalFilters();\n    if (contextId === constants_2.STATIC_CONTEXT && !inquirerId) {\n      return globalFilters;\n    }\n    const scopedFilterWrappers = this.config.getGlobalRequestFilters();\n    const scopedFilters = (0, iterare_1.iterate)(scopedFilterWrappers).map(wrapper => wrapper.getInstanceByContextId(contextId, inquirerId)).filter(host => !!host).map(host => host.instance).toArray();\n    return globalFilters.concat(scopedFilters);\n  }\n}\nexports.RouterExceptionFilters = RouterExceptionFilters;","map":{"version":3,"names":["Object","defineProperty","exports","value","RouterExceptionFilters","constants_1","require","shared_utils_1","base_exception_filter_context_1","exceptions_handler_1","constants_2","iterare_1","BaseExceptionFilterContext","constructor","container","config","applicationRef","create","instance","callback","moduleKey","contextId","STATIC_CONTEXT","inquirerId","moduleContext","exceptionHandler","ExceptionsHandler","filters","createContext","EXCEPTION_FILTERS_METADATA","isEmpty","setCustomFilters","reverse","getGlobalMetadata","globalFilters","getGlobalFilters","scopedFilterWrappers","getGlobalRequestFilters","scopedFilters","iterate","map","wrapper","getInstanceByContextId","filter","host","toArray","concat"],"sources":["C:/Users/salim/Dev/avans-nx-workshop-2024/avans-nx-workshop/node_modules/@nestjs/core/router/router-exception-filters.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RouterExceptionFilters = void 0;\nconst constants_1 = require(\"@nestjs/common/constants\");\nconst shared_utils_1 = require(\"@nestjs/common/utils/shared.utils\");\nconst base_exception_filter_context_1 = require(\"../exceptions/base-exception-filter-context\");\nconst exceptions_handler_1 = require(\"../exceptions/exceptions-handler\");\nconst constants_2 = require(\"../injector/constants\");\nconst iterare_1 = require(\"iterare\");\nclass RouterExceptionFilters extends base_exception_filter_context_1.BaseExceptionFilterContext {\n    constructor(container, config, applicationRef) {\n        super(container);\n        this.config = config;\n        this.applicationRef = applicationRef;\n    }\n    create(instance, callback, moduleKey, contextId = constants_2.STATIC_CONTEXT, inquirerId) {\n        this.moduleContext = moduleKey;\n        const exceptionHandler = new exceptions_handler_1.ExceptionsHandler(this.applicationRef);\n        const filters = this.createContext(instance, callback, constants_1.EXCEPTION_FILTERS_METADATA, contextId, inquirerId);\n        if ((0, shared_utils_1.isEmpty)(filters)) {\n            return exceptionHandler;\n        }\n        exceptionHandler.setCustomFilters(filters.reverse());\n        return exceptionHandler;\n    }\n    getGlobalMetadata(contextId = constants_2.STATIC_CONTEXT, inquirerId) {\n        const globalFilters = this.config.getGlobalFilters();\n        if (contextId === constants_2.STATIC_CONTEXT && !inquirerId) {\n            return globalFilters;\n        }\n        const scopedFilterWrappers = this.config.getGlobalRequestFilters();\n        const scopedFilters = (0, iterare_1.iterate)(scopedFilterWrappers)\n            .map(wrapper => wrapper.getInstanceByContextId(contextId, inquirerId))\n            .filter(host => !!host)\n            .map(host => host.instance)\n            .toArray();\n        return globalFilters.concat(scopedFilters);\n    }\n}\nexports.RouterExceptionFilters = RouterExceptionFilters;\n"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,sBAAsB,GAAG,KAAK,CAAC;AACvC,MAAMC,WAAW,GAAGC,OAAO,CAAC,0BAA0B,CAAC;AACvD,MAAMC,cAAc,GAAGD,OAAO,CAAC,mCAAmC,CAAC;AACnE,MAAME,+BAA+B,GAAGF,OAAO,CAAC,6CAA6C,CAAC;AAC9F,MAAMG,oBAAoB,GAAGH,OAAO,CAAC,kCAAkC,CAAC;AACxE,MAAMI,WAAW,GAAGJ,OAAO,CAAC,uBAAuB,CAAC;AACpD,MAAMK,SAAS,GAAGL,OAAO,CAAC,SAAS,CAAC;AACpC,MAAMF,sBAAsB,SAASI,+BAA+B,CAACI,0BAA0B,CAAC;EAC5FC,WAAWA,CAACC,SAAS,EAAEC,MAAM,EAAEC,cAAc,EAAE;IAC3C,KAAK,CAACF,SAAS,CAAC;IAChB,IAAI,CAACC,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACC,cAAc,GAAGA,cAAc;EACxC;EACAC,MAAMA,CAACC,QAAQ,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,SAAS,GAAGX,WAAW,CAACY,cAAc,EAAEC,UAAU,EAAE;IACtF,IAAI,CAACC,aAAa,GAAGJ,SAAS;IAC9B,MAAMK,gBAAgB,GAAG,IAAIhB,oBAAoB,CAACiB,iBAAiB,CAAC,IAAI,CAACV,cAAc,CAAC;IACxF,MAAMW,OAAO,GAAG,IAAI,CAACC,aAAa,CAACV,QAAQ,EAAEC,QAAQ,EAAEd,WAAW,CAACwB,0BAA0B,EAAER,SAAS,EAAEE,UAAU,CAAC;IACrH,IAAI,CAAC,CAAC,EAAEhB,cAAc,CAACuB,OAAO,EAAEH,OAAO,CAAC,EAAE;MACtC,OAAOF,gBAAgB;IAC3B;IACAA,gBAAgB,CAACM,gBAAgB,CAACJ,OAAO,CAACK,OAAO,CAAC,CAAC,CAAC;IACpD,OAAOP,gBAAgB;EAC3B;EACAQ,iBAAiBA,CAACZ,SAAS,GAAGX,WAAW,CAACY,cAAc,EAAEC,UAAU,EAAE;IAClE,MAAMW,aAAa,GAAG,IAAI,CAACnB,MAAM,CAACoB,gBAAgB,CAAC,CAAC;IACpD,IAAId,SAAS,KAAKX,WAAW,CAACY,cAAc,IAAI,CAACC,UAAU,EAAE;MACzD,OAAOW,aAAa;IACxB;IACA,MAAME,oBAAoB,GAAG,IAAI,CAACrB,MAAM,CAACsB,uBAAuB,CAAC,CAAC;IAClE,MAAMC,aAAa,GAAG,CAAC,CAAC,EAAE3B,SAAS,CAAC4B,OAAO,EAAEH,oBAAoB,CAAC,CAC7DI,GAAG,CAACC,OAAO,IAAIA,OAAO,CAACC,sBAAsB,CAACrB,SAAS,EAAEE,UAAU,CAAC,CAAC,CACrEoB,MAAM,CAACC,IAAI,IAAI,CAAC,CAACA,IAAI,CAAC,CACtBJ,GAAG,CAACI,IAAI,IAAIA,IAAI,CAAC1B,QAAQ,CAAC,CAC1B2B,OAAO,CAAC,CAAC;IACd,OAAOX,aAAa,CAACY,MAAM,CAACR,aAAa,CAAC;EAC9C;AACJ;AACApC,OAAO,CAACE,sBAAsB,GAAGA,sBAAsB","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}