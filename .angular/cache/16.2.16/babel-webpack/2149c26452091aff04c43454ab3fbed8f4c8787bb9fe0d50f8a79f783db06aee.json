{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ExternalExceptionFilterContext = void 0;\nconst constants_1 = require(\"@nestjs/common/constants\");\nconst shared_utils_1 = require(\"@nestjs/common/utils/shared.utils\");\nconst constants_2 = require(\"../injector/constants\");\nconst base_exception_filter_context_1 = require(\"./base-exception-filter-context\");\nconst external_exceptions_handler_1 = require(\"./external-exceptions-handler\");\nconst iterare_1 = require(\"iterare\");\nclass ExternalExceptionFilterContext extends base_exception_filter_context_1.BaseExceptionFilterContext {\n  constructor(container, config) {\n    super(container);\n    this.config = config;\n  }\n  create(instance, callback, module, contextId = constants_2.STATIC_CONTEXT, inquirerId) {\n    this.moduleContext = module;\n    const exceptionHandler = new external_exceptions_handler_1.ExternalExceptionsHandler();\n    const filters = this.createContext(instance, callback, constants_1.EXCEPTION_FILTERS_METADATA, contextId, inquirerId);\n    if ((0, shared_utils_1.isEmpty)(filters)) {\n      return exceptionHandler;\n    }\n    exceptionHandler.setCustomFilters(filters.reverse());\n    return exceptionHandler;\n  }\n  getGlobalMetadata(contextId = constants_2.STATIC_CONTEXT, inquirerId) {\n    if (!this.config) {\n      return [];\n    }\n    const globalFilters = this.config.getGlobalFilters();\n    if (contextId === constants_2.STATIC_CONTEXT && !inquirerId) {\n      return globalFilters;\n    }\n    const scopedFilterWrappers = this.config.getGlobalRequestFilters();\n    const scopedFilters = (0, iterare_1.iterate)(scopedFilterWrappers).map(wrapper => wrapper.getInstanceByContextId(contextId, inquirerId)).filter(host => !!host).map(host => host.instance).toArray();\n    return globalFilters.concat(scopedFilters);\n  }\n}\nexports.ExternalExceptionFilterContext = ExternalExceptionFilterContext;","map":{"version":3,"names":["Object","defineProperty","exports","value","ExternalExceptionFilterContext","constants_1","require","shared_utils_1","constants_2","base_exception_filter_context_1","external_exceptions_handler_1","iterare_1","BaseExceptionFilterContext","constructor","container","config","create","instance","callback","module","contextId","STATIC_CONTEXT","inquirerId","moduleContext","exceptionHandler","ExternalExceptionsHandler","filters","createContext","EXCEPTION_FILTERS_METADATA","isEmpty","setCustomFilters","reverse","getGlobalMetadata","globalFilters","getGlobalFilters","scopedFilterWrappers","getGlobalRequestFilters","scopedFilters","iterate","map","wrapper","getInstanceByContextId","filter","host","toArray","concat"],"sources":["C:/Users/salim/Dev/avans-nx-workshop-2024/avans-nx-workshop/node_modules/@nestjs/core/exceptions/external-exception-filter-context.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ExternalExceptionFilterContext = void 0;\nconst constants_1 = require(\"@nestjs/common/constants\");\nconst shared_utils_1 = require(\"@nestjs/common/utils/shared.utils\");\nconst constants_2 = require(\"../injector/constants\");\nconst base_exception_filter_context_1 = require(\"./base-exception-filter-context\");\nconst external_exceptions_handler_1 = require(\"./external-exceptions-handler\");\nconst iterare_1 = require(\"iterare\");\nclass ExternalExceptionFilterContext extends base_exception_filter_context_1.BaseExceptionFilterContext {\n    constructor(container, config) {\n        super(container);\n        this.config = config;\n    }\n    create(instance, callback, module, contextId = constants_2.STATIC_CONTEXT, inquirerId) {\n        this.moduleContext = module;\n        const exceptionHandler = new external_exceptions_handler_1.ExternalExceptionsHandler();\n        const filters = this.createContext(instance, callback, constants_1.EXCEPTION_FILTERS_METADATA, contextId, inquirerId);\n        if ((0, shared_utils_1.isEmpty)(filters)) {\n            return exceptionHandler;\n        }\n        exceptionHandler.setCustomFilters(filters.reverse());\n        return exceptionHandler;\n    }\n    getGlobalMetadata(contextId = constants_2.STATIC_CONTEXT, inquirerId) {\n        if (!this.config) {\n            return [];\n        }\n        const globalFilters = this.config.getGlobalFilters();\n        if (contextId === constants_2.STATIC_CONTEXT && !inquirerId) {\n            return globalFilters;\n        }\n        const scopedFilterWrappers = this.config.getGlobalRequestFilters();\n        const scopedFilters = (0, iterare_1.iterate)(scopedFilterWrappers)\n            .map(wrapper => wrapper.getInstanceByContextId(contextId, inquirerId))\n            .filter(host => !!host)\n            .map(host => host.instance)\n            .toArray();\n        return globalFilters.concat(scopedFilters);\n    }\n}\nexports.ExternalExceptionFilterContext = ExternalExceptionFilterContext;\n"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,8BAA8B,GAAG,KAAK,CAAC;AAC/C,MAAMC,WAAW,GAAGC,OAAO,CAAC,0BAA0B,CAAC;AACvD,MAAMC,cAAc,GAAGD,OAAO,CAAC,mCAAmC,CAAC;AACnE,MAAME,WAAW,GAAGF,OAAO,CAAC,uBAAuB,CAAC;AACpD,MAAMG,+BAA+B,GAAGH,OAAO,CAAC,iCAAiC,CAAC;AAClF,MAAMI,6BAA6B,GAAGJ,OAAO,CAAC,+BAA+B,CAAC;AAC9E,MAAMK,SAAS,GAAGL,OAAO,CAAC,SAAS,CAAC;AACpC,MAAMF,8BAA8B,SAASK,+BAA+B,CAACG,0BAA0B,CAAC;EACpGC,WAAWA,CAACC,SAAS,EAAEC,MAAM,EAAE;IAC3B,KAAK,CAACD,SAAS,CAAC;IAChB,IAAI,CAACC,MAAM,GAAGA,MAAM;EACxB;EACAC,MAAMA,CAACC,QAAQ,EAAEC,QAAQ,EAAEC,MAAM,EAAEC,SAAS,GAAGZ,WAAW,CAACa,cAAc,EAAEC,UAAU,EAAE;IACnF,IAAI,CAACC,aAAa,GAAGJ,MAAM;IAC3B,MAAMK,gBAAgB,GAAG,IAAId,6BAA6B,CAACe,yBAAyB,CAAC,CAAC;IACtF,MAAMC,OAAO,GAAG,IAAI,CAACC,aAAa,CAACV,QAAQ,EAAEC,QAAQ,EAAEb,WAAW,CAACuB,0BAA0B,EAAER,SAAS,EAAEE,UAAU,CAAC;IACrH,IAAI,CAAC,CAAC,EAAEf,cAAc,CAACsB,OAAO,EAAEH,OAAO,CAAC,EAAE;MACtC,OAAOF,gBAAgB;IAC3B;IACAA,gBAAgB,CAACM,gBAAgB,CAACJ,OAAO,CAACK,OAAO,CAAC,CAAC,CAAC;IACpD,OAAOP,gBAAgB;EAC3B;EACAQ,iBAAiBA,CAACZ,SAAS,GAAGZ,WAAW,CAACa,cAAc,EAAEC,UAAU,EAAE;IAClE,IAAI,CAAC,IAAI,CAACP,MAAM,EAAE;MACd,OAAO,EAAE;IACb;IACA,MAAMkB,aAAa,GAAG,IAAI,CAAClB,MAAM,CAACmB,gBAAgB,CAAC,CAAC;IACpD,IAAId,SAAS,KAAKZ,WAAW,CAACa,cAAc,IAAI,CAACC,UAAU,EAAE;MACzD,OAAOW,aAAa;IACxB;IACA,MAAME,oBAAoB,GAAG,IAAI,CAACpB,MAAM,CAACqB,uBAAuB,CAAC,CAAC;IAClE,MAAMC,aAAa,GAAG,CAAC,CAAC,EAAE1B,SAAS,CAAC2B,OAAO,EAAEH,oBAAoB,CAAC,CAC7DI,GAAG,CAACC,OAAO,IAAIA,OAAO,CAACC,sBAAsB,CAACrB,SAAS,EAAEE,UAAU,CAAC,CAAC,CACrEoB,MAAM,CAACC,IAAI,IAAI,CAAC,CAACA,IAAI,CAAC,CACtBJ,GAAG,CAACI,IAAI,IAAIA,IAAI,CAAC1B,QAAQ,CAAC,CAC1B2B,OAAO,CAAC,CAAC;IACd,OAAOX,aAAa,CAACY,MAAM,CAACR,aAAa,CAAC;EAC9C;AACJ;AACAnC,OAAO,CAACE,8BAA8B,GAAGA,8BAA8B","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}